---
kind: pipeline
name: node10-arm64

platform:
  os: linux
  arch: arm64

steps:
- name: test
  image: arm64v8/node:10
  commands:
  - apt-get update
  - apt-get install opam
  - opam init
  - eval $(opam config env)
  - opam switch install 4.05.0
  - eval $(opam config env)
  - opam pin add flowtype . -n
  - opam depext -u flowtype
  - opam install flowtype --deps-only
  - opam install js_of_ocaml 
  - eval $(opam config env)
  - make all
  - ./bin/flow --help
  - cp ./bin/flow .

# ---
# kind: pipeline
# name: node8-arm64

# platform:
#   os: linux
#   arch: arm64

# steps:
# - name: test
#   image: node:8
#   commands:
#   - npm install
#   - npm test
