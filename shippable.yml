language: node_js

node_js:
          - 10.8

runtime:
          nodePool: shippable_shared_aarch64
            
build:
          ci:
                  - apt-get install opam
                  - opam init
                  - eval $(opam config env)
                  - opam switch install 4.05.0
                  - eval $(opam config env)
                  - opam pin add flowtype . -n
                  - opam depext -u flowtype
                  - opam install flowtype --deps-only
                  - opam install js_of_ocaml 
                  - eval $(opam config env)
                  - make all
                  - ./bin/flow --help
                  - cp ./bin/flow .
                  - git add .
                  - git commit -m 'adding binary for $BUILD_NUMBER [skip ci]'
                  - git remote add ssh-origin git@github.com:ossdev07/flow.git
                  - ssh-agent bash -c 'ssh-add /tmp/ssh/00_sub; git push ssh-origin master'
                     
